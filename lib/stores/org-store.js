"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),_get=function(e,r,t){for(var o=!0;o;){var n=e,a=r,i=t;o=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,a);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(i)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,r=a,t=i,o=!0,u=s=void 0}},_store=require("./store"),_store2=_interopRequireDefault(_store),_recordsOrg=require("../records/org"),_recordsOrg2=_interopRequireDefault(_recordsOrg),_immutable=require("immutable"),OrgStore=function(e){function r(){_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,arguments),this._orgs=(0,_immutable.OrderedMap)(),this._fetched=!1}return _inherits(r,e),_createClass(r,[{key:"handleAction",value:function(e){switch(e.type){case"token.invalidate":this._orgs=(0,_immutable.OrderedMap)(),this._fetched=!1,this._lastError=null;break;case"org.fetched-all":var r=e.data.data;this._orgs=(0,_immutable.OrderedMap)(r.orgs.map(function(e){return[e.id,_recordsOrg2["default"].deserialize(e)]})),this._fetched=!0,this._lastError=null;break;case"org.fetch-all-failed":this.handleErrorJqxhr(e.data.jqxhr);break;default:return}this.notifyChange()}},{key:"orgs",get:function(){return this._orgs}}]),r}(_store2["default"]);exports["default"]=new OrgStore,module.exports=exports["default"];