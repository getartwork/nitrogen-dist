"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_get=function(e,r,t){for(var n=!0;n;){var o=e,u=r,s=t;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,u);if(void 0!==a){if("value"in a)return a.value;var i=a.get;if(void 0===i)return;return i.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return;e=l,r=u,t=s,n=!0,a=l=void 0}},_store=require("./store"),_store2=_interopRequireDefault(_store),_recordsUser=require("../records/user"),_recordsUser2=_interopRequireDefault(_recordsUser),UserStore=function(e){function r(){_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).apply(this,arguments),this._user=null}return _inherits(r,e),_createClass(r,[{key:"handleAction",value:function(e){switch(e.type){case"token.invalidate":this._user=null,this._lastError=null;break;case"user.fetched":var r=e.data.data;this._user=_recordsUser2["default"].deserialize(r.user),this._lastError=null;break;case"user.fetch-failed":this._user=null,this.handleErrorJqxhr(e.data.jqxhr);break;default:return}this.notifyChange()}},{key:"user",get:function(){return this._user}},{key:"username",get:function(){return this._user?this._user.username:null}}]),r}(_store2["default"]);exports["default"]=new UserStore,module.exports=exports["default"];