"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function watch(t){var e=new _atom.CompositeDisposable,o=!1,n=function a(t){if(!o){var n=t.getBuffer(),i=n?n.file:null;i?(o=!0,monkeyPatchFile(i)):e.add(t.onDidSave(function(){a(t)}))}};e.add(t.onDidDestroy(function(){e.dispose(),e=null})),n(t)}function monkeyPatchFile(t){var e=t.constructor;e.prototype.__originalSetPath||(e.prototype.__originalSetPath=e.prototype.setPath,e.prototype.setPath=function(t){this.__previousPath=this.path,t.match(/\.unison\.tmp$/)||this.__originalSetPath(t)})}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),_atom=require("atom"),RenameWatcher=function(){function t(){_classCallCheck(this,t),this.subscriptions=null}return _createClass(t,[{key:"activate",value:function(){this.subscriptions=new _atom.CompositeDisposable,this.subscriptions.add(atom.workspace.observeTextEditors(function(t){t.__watchRename||(t.__watchRename=!0,watch(t))}))}},{key:"deactivate",value:function(){this.subscriptions.dispose()}}]),t}();exports["default"]=new RenameWatcher,module.exports=exports["default"];