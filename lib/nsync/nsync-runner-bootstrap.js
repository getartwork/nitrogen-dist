"use strict";module.exports=function(e,n){require.main.filename=e,require.main.paths.push(n);var r=require("electron").remote,i=r.BrowserWindow,t=r.getCurrentWindow();if(i.getAllWindows().find(function(e){return e.id!==t.id&&"atom://nitrogen/lib/nsync/nsync-runner.html"===e.getURL()}))return void t.close();var o=require("path"),u=require("fs"),s=require("lockfile"),c=r.app,a=r.getGlobal("process"),l=new Date(+new Date-1e3*a.uptime()).toISOString().slice(0,10),d="nitrogen-"+l+"-"+a.pid+".lock",f=o.join(c.getPath("temp"),d);s.lock(f,function(n){if(n)return void t.close();var r=require("./resources");r.assetPath=o.join(o.dirname(e),"..","..","resources"),window.nsyncRunner=require("./nsync-runner").init(),window.nsyncRunner.beforeExit=function(){try{u.unlinkSync(f)}catch(e){}}})};