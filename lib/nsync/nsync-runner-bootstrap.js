"use strict";module.exports=function(e,r){require.main.filename=e,require.main.paths.push(r);var n=require("remote"),i=n.require("browser-window"),t=n.getCurrentWindow();if(i.getAllWindows().find(function(e){return e.id!==t.id&&"atom://nitrogen/lib/nsync/nsync-runner.html"===e.getUrl()}))return void t.close();var o=require("path"),u=require("fs"),s=require("lockfile"),c=n.require("app"),a=n.getGlobal("process"),l=new Date(+new Date-1e3*a.uptime()).toISOString().slice(0,10),d="nitrogen-"+l+"-"+a.pid+".lock",f=o.join(c.getPath("temp"),d);s.lock(f,function(r){if(r)return void t.close();var n=require("./resources");n.assetPath=o.join(o.dirname(e),"..","..","resources"),window.nsyncRunner=require("./nsync-runner").init(),window.nsyncRunner.beforeExit=function(){try{u.unlinkSync(f)}catch(e){}}})};