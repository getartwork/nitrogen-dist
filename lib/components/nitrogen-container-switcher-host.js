"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function(e,t,r){for(var o=!0;o;){var n=e,a=t,i=r;o=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(i)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,r=i,o=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_recordsHost=require("../records/host"),_recordsHost2=_interopRequireDefault(_recordsHost),_storesContainerStore=require("../stores/container-store"),_storesContainerStore2=_interopRequireDefault(_storesContainerStore),_storesOrgStore=require("../stores/org-store"),_storesOrgStore2=_interopRequireDefault(_storesOrgStore),_nitrogenDropdownMenuItem=require("./nitrogen-dropdown-menu-item"),_nitrogenDropdownMenuItem2=_interopRequireDefault(_nitrogenDropdownMenuItem),NitrogenContainerSwitcherHost=function(e){function t(){var e=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.displayName="NitrogenContainerSwitcherHost",this.state={containers:_storesContainerStore2["default"].liveContainersByHostId(this.props.host.id),containersFetched:_storesContainerStore2["default"].fetched,org:_storesOrgStore2["default"].orgs.get(this.props.host.orgId)},this.containerStoreDidChange=function(){e.setState({containers:_storesContainerStore2["default"].liveContainersByHostId(e.props.host.id),containersFetched:_storesContainerStore2["default"].fetched})},this.orgStoreDidChange=function(){e.setState({org:_storesOrgStore2["default"].orgs.get(e.props.host.orgId)})}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){_storesContainerStore2["default"].onChange(this.containerStoreDidChange),_storesOrgStore2["default"].onChange(this.orgStoreDidChange)}},{key:"componentWillUnmount",value:function(){_storesContainerStore2["default"].offChange(this.containerStoreDidChange),_storesOrgStore2["default"].offChange(this.orgStoreDidChange)}},{key:"render",value:function(){var e=this.state,t=e.containers,r=e.containersFetched,o=e.org,n=this.props,a=n.host,i=n.onSelect;return _react2["default"].createElement("div",{className:"nitrogen-container-switcher-host"},_react2["default"].createElement(_nitrogenDropdownMenuItem2["default"],{disabled:!0},_react2["default"].createElement("strong",null,a.isOrgHost?o?o.displayName+" ("+a.displayName+")":"Org ("+a.displayName+")":"Personal ("+a.displayName+")")),r?t&&t.size>0?t.toList().map(function(e){return _react2["default"].createElement(_nitrogenDropdownMenuItem2["default"],{key:"container-"+e.id,onSelect:function(){i(e.slug)}},e.displayName)}):_react2["default"].createElement(_nitrogenDropdownMenuItem2["default"],{disabled:!0},_react2["default"].createElement("em",null,"Empty workstation")):_react2["default"].createElement(_nitrogenDropdownMenuItem2["default"],{disabled:!0},_react2["default"].createElement("em",null,"Loading containers...")))}}],[{key:"propTypes",value:{host:_react.PropTypes.instanceOf(_recordsHost2["default"]).isRequired,onSelect:_react.PropTypes.func},enumerable:!0}]),t}(_react2["default"].Component);exports["default"]=NitrogenContainerSwitcherHost,module.exports=exports["default"];